# テストの練習

### 種類
- ユニットテスト: 関数やクラスの単位で振る舞いを調べる。
- 結合テスト：データベースなどの周辺コンポーネントも含めて実施する。
- E2E(End-to-End)テスト：実際にユーザーが使用するブラウザなどの操作を模倣してシステム全体を対象する。

### ユニットテスト
 Pythonには標準ライブラリにユニットテストを書くためのパッケージが用意されている。
 パッケージ名は、「unittest」

### テストディスカバリ
 　テストは複数のファイルに分割されている場合、各ファイルのテストを一括して実行する機能の事。（Python2.7以降)
 　特定のディレクトリ以下にある全てのテストを実行。
 　Pythonコマンドの-mオプションにunitestを指定。
 そしてdiscoverサブコマンドを入力する事が可能。例では-vオプションもつけると実行されたテストが分かり易くなります。

#### コマンド例：
  > $ python -m unittest discover -v
   <br> ・・・


   テストディスカバリではディレクトリの中からファイル名を頼りにテストが記載されたファイルを探します。
   そのためテスト記述したファイルの名前には先頭「test」をつけること。
   また、ファイル名のパターンはテストディスカバリを実行する際に-pオプションを使って変更する事も可能。

### モック(テストダブル)
テスト対象が別のコンポーネントに依存しているとテストが書きにくい場合があります。その場合依存しているコンポーネントを代替品に置き換えることでテストを書きやすくなります。
その「代替品」は一般に「スタブ」「モック」、総称し「テストダブル」などと呼ばれています。※Python3.3以降から標準ライブラリにモックを作る為のパッケージの「unittest.mock」が追加。

#### コマンド例:
 > from unittest import mock

 >  #モックが呼び出された時は100を返す。<br>
 $ mock_obj = mock.Mock(return_value=100)<br>
 $ mock_obj()<br>
 100

 > #モックに変数を追加。<br>
 $ mock_obj.name = 'Foo'<br>
 $ mock_obj.name<br>
 'Foo'
